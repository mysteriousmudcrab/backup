A simple Ruby backup class utilising rsync to only backup files that have changed.
If a file is deleted locally, it will be also removed from the backup (see example run).
A prompt appears before the backup starts, giving the user a chance to verify config (only in verbose mode).
A sample main.rb file is included for usage and instantiating the class.

Multiple destinations can be specified:  the first available will be used.
A brief check of each backup location is checked for accessibility.  If inaccessable, a warning will appear but backup will still proceed.


Sample run (backup to Ubuntu One cloud):

mudcrab@mudcrab:~/backup$ ./main.rb 
(II) Backup list:
(II)  => /home/mudcrab/small
(II) 0 files/directories inaccessable.
(II) Backing up to: '/home/mudcrab/Ubuntu One'
(II) About to run command: /usr/bin/rsync  --archive --hard-links --delete --delete-excluded --verbose --stats --itemize-changes --progress --human-readable   '/home/mudcrab/small' '/home/mudcrab/Ubuntu One'
(II) Proceed?  (<y>/n): 
(II) Proceeding with backup...
sending incremental file list
delta-transmission disabled for local transfer or --whole-file
.d..t...... small/
*deleting   small/fix.bat
>f+++++++++ small/baked-small-cup-sponge-(kuih-baulu).png
     172.48K 100%   34.30MB/s    0:00:00 (xfer#1, to-check=8/10)
>f+++++++++ small/char-kway-teow.png
     464.81K 100%   25.22MB/s    0:00:00 (xfer#2, to-check=7/10)
>f+++++++++ small/chocolate-topping-with-cocoa.png
     321.06K 100%    9.80MB/s    0:00:00 (xfer#3, to-check=6/10)
>f+++++++++ small/frutti-nutti-pilaf.png
     244.91K 100%    6.64MB/s    0:00:00 (xfer#4, to-check=5/10)
>f+++++++++ small/hoon-kueh-with-maize.png
     415.36K 100%    8.63MB/s    0:00:00 (xfer#5, to-check=4/10)
>f+++++++++ small/peanut-cookies-(pah-sang-peang).png
     191.03K 100%    3.59MB/s    0:00:00 (xfer#6, to-check=3/10)
>f+++++++++ small/sour-salted-fish.png
     206.22K 100%    3.30MB/s    0:00:00 (xfer#7, to-check=2/10)
>f+++++++++ small/special-fried-noodles.png
     352.29K 100%    4.91MB/s    0:00:00 (xfer#8, to-check=1/10)
>f+++++++++ small/spice-muffins.png
     411.83K 100%    5.03MB/s    0:00:00 (xfer#9, to-check=0/10)
total: matches=0  hash_hits=0  false_alarms=0 data=2846724

rsync[7954] (sender) heap statistics:
  arena:         647168   (bytes from sbrk)
  ordblks:            3   (chunks not in use)
  smblks:             4
  hblks:              2   (chunks from mmap)
  hblkhd:        401408   (bytes from mmap)
  allmem:       1048576   (bytes from sbrk + mmap)
  usmblks:            0
  fsmblks:          304
  uordblks:      225648   (bytes used)
  fordblks:      421520   (bytes free)
  keepcost:      396608   (bytes in releasable chunk)

rsync[7956] (server receiver) heap statistics:
  arena:         135168   (bytes from sbrk)
  ordblks:            1   (chunks not in use)
  smblks:             3
  hblks:              3   (chunks from mmap)
  hblkhd:        667648   (bytes from mmap)
  allmem:        802816   (bytes from sbrk + mmap)
  usmblks:            0
  fsmblks:          288
  uordblks:       79120   (bytes used)
  fordblks:       56048   (bytes free)
  keepcost:       55760   (bytes in releasable chunk)

rsync[7955] (server generator) heap statistics:
  arena:         135168   (bytes from sbrk)
  ordblks:            1   (chunks not in use)
  smblks:             9
  hblks:              2   (chunks from mmap)
  hblkhd:        401408   (bytes from mmap)
  allmem:        536576   (bytes from sbrk + mmap)
  usmblks:            0
  fsmblks:          704
  uordblks:       46368   (bytes used)
  fordblks:       88800   (bytes free)
  keepcost:       88096   (bytes in releasable chunk)

Number of files: 10
Number of files transferred: 9
Total file size: 2.71M bytes
Total transferred file size: 2.71M bytes
Literal data: 2.71M bytes
Matched data: 0 bytes
File list size: 368
File list generation time: 0.001 seconds
File list transfer time: 0.000 seconds
Total bytes sent: 2.72M
Total bytes received: 187

sent 2.72M bytes  received 187 bytes  5.43M bytes/sec
total size is 2.71M  speedup is 1.00
mudcrab@mudcrab:~/backup$ 

